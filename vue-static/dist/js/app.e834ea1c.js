(function(){"use strict";var t={7319:function(t,e,r){var o=r(6848),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",[t.isntLoggedIn?e("span",[e("router-link",{attrs:{to:"/"}},[t._v("Login")]),t._v(" | ")],1):t._e(),t.isLoggedIn?e("span",[e("router-link",{attrs:{to:"/order"}},[t._v("Naruci")]),t._v(" | ")],1):t._e(),t.isLoggedIn?e("span",[e("router-link",{attrs:{to:"/my-order"}},[t._v("Moje Narudzbine")]),t._v(" | ")],1):t._e(),e("router-link",{attrs:{to:"/books"}},[t._v("Knjige")]),t._v(" | "),e("router-link",{attrs:{to:"/authors"}},[t._v("Autori")]),t._v(" | "),e("router-link",{attrs:{to:"/publishers"}},[t._v("Izdavaci")]),t._v(" | "),e("router-link",{attrs:{to:"/equipment"}},[t._v("Oprema")]),t._v(" | "),e("router-link",{attrs:{to:"/book-types"}},[t._v("Vrste")]),t._v(" | "),e("router-link",{attrs:{to:"/genres"}},[t._v("Zanrovi")]),t.isLoggedIn?e("span",[t._v(" | "),e("a",{on:{click:t.logout}},[t._v("Logout")])]):t._e()],1),e("router-view")],1)},n=[],s=(r(4114),{data(){return{isLoggedIn:!!localStorage.getItem("token2"),isntLoggedIn:!localStorage.getItem("token2")}},watch:{isLoggedIn(t){t&&this.$forceUpdate()}},methods:{logout(){localStorage.removeItem("token2"),this.isLoggedIn=!1,this.$router.push("/")}},mounted(){this.isLoggedIn=!!localStorage.getItem("token2")}}),i=s,u=r(1656),c=(0,u.A)(i,a,n,!1,null,null,null),l=c.exports,h=r(6178),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("h1",[t._v("Login")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",[e("label",{attrs:{for:"username"}},[t._v("Username:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",[e("label",{attrs:{for:"password"}},[t._v("Password:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("button",{attrs:{type:"submit"}},[t._v("Login")])]),t.errorMessage?e("p",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()])},p=[],m={data(){return{username:"",password:"",errorMessage:""}},methods:{async login(){try{console.log(this.username),console.log(this.password);const t=await fetch("http://localhost:9000/korisnik/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.username,password:this.password})});if(!t.ok)throw new Error("Login failed");const e=await t.json();console.log(e.token),e.token?(localStorage.setItem("token2",e.token),this.$router.push("/books").then((()=>{window.location.reload()}))):this.errorMessage="Invalid login credentials"}catch(t){this.errorMessage=t.message}}}},v=m,f=(0,u.A)(v,d,p,!1,null,"19f4dccd",null),_=f.exports,g=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("BooksTable")],1)},b=[],k=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Knjige")]),e("table",[t._m(0),e("tbody",t._l(t.books,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))]),e("td",[t._v(t._s(r.cijena))]),e("td",[t._v(t._s(r.authorName))]),e("td",[t._v(t._s(r.genreName))]),e("td",[t._v(t._s(r.bookTypeName))]),e("td",[t._v(t._s(r.publisherName))])])})),0)])])},y=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")]),e("th",[t._v("Cijena")]),e("th",[t._v("Autor")]),e("th",[t._v("Zanr")]),e("th",[t._v("Tip knjige")]),e("th",[t._v("Izdavac")])])])}],j={data(){return{books:[]}},methods:{async fetchBooks(){try{const t=await fetch("http://localhost:9000/knjiga"),e=await t.json();this.books=await Promise.all(e.map((async t=>{const e=await this.fetchName("autor",t.autor_id),r=await this.fetchName("zanr",t.zanr_id),o=await this.fetchName("vrsta_knjige",t.vrsta_knjige_id),a=await this.fetchName("izdavac",t.izdavac_id);return{...t,authorName:e,genreName:r,bookTypeName:o,publisherName:a}})))}catch(t){console.error("Error fetching books:",t)}},async fetchName(t,e){try{const r=await fetch(`http://localhost:9000/${t}/${e}`),o=await r.json();return o.naziv}catch(r){return console.error(`Error fetching ${t} name:`,r),""}}},mounted(){this.fetchBooks()}},w=j,N=(0,u.A)(w,k,y,!1,null,"74a017cc",null),A=N.exports,z={name:"App",components:{BooksTable:A}},I=z,O=(0,u.A)(I,g,b,!1,null,null,null),T=O.exports,x=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AuthorsTable")],1)},M=[],S=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Autori")]),e("table",[t._m(0),e("tbody",t._l(t.authors,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))])])})),0)])])},C=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")])])])}],E={data(){return{authors:[]}},methods:{async fetchAuthors(){try{const t=await fetch("http://localhost:9000/autor"),e=await t.json();this.authors=e}catch(t){console.error("Error fetching authors:",t)}}},mounted(){this.fetchAuthors()}},K=E,L=(0,u.A)(K,S,C,!1,null,"4d361406",null),P=L.exports,$={name:"App",components:{AuthorsTable:P}},q=$,B=(0,u.A)(q,x,M,!1,null,null,null),F=B.exports,J=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AuthorsTable")],1)},D=[],G=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Izdavaci")]),e("table",[t._m(0),e("tbody",t._l(t.authors,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))])])})),0)])])},U=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")])])])}],Z={data(){return{authors:[]}},methods:{async fetchAuthors(){try{const t=await fetch("http://localhost:9000/izdavac"),e=await t.json();this.authors=e}catch(t){console.error("Error fetching authors:",t)}}},mounted(){this.fetchAuthors()}},V=Z,R=(0,u.A)(V,G,U,!1,null,"3a21ab88",null),W=R.exports,H={name:"App",components:{AuthorsTable:W}},Q=H,X=(0,u.A)(Q,J,D,!1,null,null,null),Y=X.exports,tt=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Dodatna oprema")]),e("table",[t._m(0),e("tbody",t._l(t.authors,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))])])})),0)])])},et=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")])])])}],rt={data(){return{authors:[]}},methods:{async fetchAuthors(){try{const t=await fetch("http://localhost:9000/oprema"),e=await t.json();this.authors=e}catch(t){console.error("Error fetching authors:",t)}}},mounted(){this.fetchAuthors()}},ot=rt,at=(0,u.A)(ot,tt,et,!1,null,"3ca2fedb",null),nt=at.exports,st=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AuthorsTable")],1)},it=[],ut=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Vrste knjiga")]),e("table",[t._m(0),e("tbody",t._l(t.authors,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))])])})),0)])])},ct=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")])])])}],lt={data(){return{authors:[]}},methods:{async fetchAuthors(){try{const t=await fetch("http://localhost:9000/vrsta_knjige"),e=await t.json();this.authors=e}catch(t){console.error("Error fetching authors:",t)}}},mounted(){this.fetchAuthors()}},ht=lt,dt=(0,u.A)(ht,ut,ct,!1,null,"17d9ccc4",null),pt=dt.exports,mt={name:"App",components:{AuthorsTable:pt}},vt=mt,ft=(0,u.A)(vt,st,it,!1,null,null,null),_t=ft.exports,gt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AuthorsTable")],1)},bt=[],kt=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Zanrovi")]),e("table",[t._m(0),e("tbody",t._l(t.authors,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))])])})),0)])])},yt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")])])])}],jt={data(){return{authors:[]}},methods:{async fetchAuthors(){try{const t=await fetch("http://localhost:9000/zanr"),e=await t.json();this.authors=e}catch(t){console.error("Error fetching authors:",t)}}},mounted(){this.fetchAuthors()}},wt=jt,Nt=(0,u.A)(wt,kt,yt,!1,null,"4a7021b8",null),At=Nt.exports,zt={name:"App",components:{AuthorsTable:At}},It=zt,Ot=(0,u.A)(It,gt,bt,!1,null,null,null),Tt=Ot.exports,xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("h1",[t._v("Knjige")]),e("table",{staticClass:"styled-table"},[t._m(0),e("tbody",t._l(t.knjige,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))]),e("td",[t._v(t._s(r.cijena)+" RSD")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedKnjigaId,expression:"selectedKnjigaId"}],attrs:{type:"radio",name:"knjiga"},domProps:{value:r.id,checked:t._q(t.selectedKnjigaId,r.id)},on:{change:function(e){t.selectedKnjigaId=r.id}}})])])})),0)]),e("h1",[t._v("Oprema")]),e("table",{staticClass:"styled-table"},[t._m(1),e("tbody",t._l(t.oprema,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.naziv))]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOpremaId,expression:"selectedOpremaId"}],attrs:{type:"radio",name:"oprema"},domProps:{value:r.id,checked:t._q(t.selectedOpremaId,r.id)},on:{change:function(e){t.selectedOpremaId=r.id}}})])])})),0)]),e("button",{staticClass:"order-button",on:{click:t.naruci}},[t._v("Naruči")]),t.errorMessage?e("p",{staticClass:"error-message"},[t._v(t._s(t.errorMessage))]):t._e()])},Mt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")]),e("th",[t._v("Cena")]),e("th",[t._v("Odabir")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Naziv")]),e("th",[t._v("Odabir")])])])}],St=(r(4979),{data(){return{knjige:[],oprema:[],selectedKnjigaId:null,selectedOpremaId:null,errorMessage:""}},created(){this.fetchKnjige(),this.fetchOprema()},methods:{async fetchKnjige(){localStorage.getItem("token2")||this.$router.push("/");try{const t=await fetch("http://localhost:9000/knjiga");if(!t.ok)throw new Error("Greška prilikom učitavanja knjiga.");const e=await t.json();console.log("Knjige:",e),this.knjige=e}catch(t){console.error("Fetch knjige error:",t),this.errorMessage=t.message}},async fetchOprema(){try{const t=await fetch("http://localhost:9000/oprema");if(!t.ok)throw new Error("Greška prilikom učitavanja opreme.");const e=await t.json();console.log("Oprema:",e),this.oprema=e}catch(t){console.error("Fetch oprema error:",t),this.errorMessage=t.message}},async naruci(){if(!this.selectedKnjigaId)return void(this.errorMessage="Morate odabrati knjigu.");this.errorMessage="";const t=localStorage.getItem("token2");if(!t)return void(this.errorMessage="Nema JWT tokena u localStorage.");const e=JSON.parse(atob(t.split(".")[1])),r=e.id,o={knjiga_id:this.selectedKnjigaId,dodatna_oprema_id:this.selectedOpremaId,korisnik_id:r};try{const e=await fetch("http://localhost:9000/narudzbina",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o)});if(!e.ok)throw new Error("Naručivanje nije uspelo.");alert("Narudžbina uspešno poslata!")}catch(a){console.error("Naručivanje error:",a),this.errorMessage=a.message}}}}),Ct=St,Et=(0,u.A)(Ct,xt,Mt,!1,null,"64960666",null),Kt=Et.exports,Lt=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Moje Narudzbine")]),t.loading?e("div",[t._v("Učitavanje...")]):e("table",{staticClass:"styled-table"},[t._m(0),e("tbody",t._l(t.filteredNarudzbine,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),e("td",[t._v(t._s(t.getKnjigaName(r.knjiga_id)))]),r.dodatna_oprema_id?e("td",[t._v(t._s(t.getOpremaName(r.dodatna_oprema_id)))]):e("td",[t._v("Nema dodatne opreme")])])})),0)]),t.errorMessage?e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.errorMessage))]):t._e()])},Pt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID Narudzbine")]),e("th",[t._v("Knjiga")]),e("th",[t._v("Oprema")])])])}],$t={data(){return{narudzbine:[],knjigaNames:{},opremaNames:{},errorMessage:"",loading:!0}},computed:{filteredNarudzbine(){const t=localStorage.getItem("token2");if(t){const e=JSON.parse(atob(t.split(".")[1])),r=e.id;return this.narudzbine.filter((t=>t.korisnik_id===r))}return[]}},created(){this.fetchNarudzbine()},methods:{async fetchNarudzbine(){localStorage.getItem("token2")||this.$router.push("/");try{const t=await fetch("http://localhost:9000/narudzbina");if(!t.ok)throw new Error("Greska prilikom ucitavanja narudzbina.");const e=await t.json();setTimeout((()=>{this.narudzbine=e,this.fetchNames()}),2e3)}catch(t){console.error("Fetch narudzbine error:",t),this.errorMessage=t.message,this.loading=!1}},async fetchNames(){try{const t=await fetch("http://localhost:9000/knjiga"),e=await fetch("http://localhost:9000/oprema");if(t.ok){const e=await t.json();this.knjigaNames=e.reduce(((t,e)=>(t[e.id]=e.naziv,t)),{})}if(e.ok){const t=await e.json();this.opremaNames=t.reduce(((t,e)=>(t[e.id]=e.naziv,t)),{})}}catch(t){console.error("Fetch names error:",t),this.errorMessage=t.message}finally{this.loading=!1}},getKnjigaName(t){return this.knjigaNames[t]||"Nepoznata knjiga"},getOpremaName(t){return this.opremaNames[t]||"Nepoznata oprema"}}},qt=$t,Bt=(0,u.A)(qt,Lt,Pt,!1,null,null,null),Ft=Bt.exports;o.Ay.use(h.Ay);const Jt=[{path:"/",name:"home",component:_},{path:"/order",name:"order",component:Kt},{path:"/my-order",name:"my-order",component:Ft},{path:"/equipment",name:"equipment",component:nt},{path:"/genres",name:"genres",component:Tt},{path:"/book-types",name:"type",component:_t},{path:"/authors",name:"author",component:F},{path:"/publishers",name:"publisher",component:Y},{path:"/books",name:"book",component:T},{path:"/about",name:"about",component:()=>r.e(594).then(r.bind(r,1417))}],Dt=new h.Ay({mode:"history",base:"/",routes:Jt});var Gt=Dt;o.Ay.config.productionTip=!1,new o.Ay({router:Gt,render:t=>t(l)}).$mount("#app")}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,o,a,n){if(!o){var s=1/0;for(l=0;l<t.length;l++){o=t[l][0],a=t[l][1],n=t[l][2];for(var i=!0,u=0;u<o.length;u++)(!1&n||s>=n)&&Object.keys(r.O).every((function(t){return r.O[t](o[u])}))?o.splice(u--,1):(i=!1,n<s&&(s=n));if(i){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[o,a,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,o){return r.f[o](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/about.bf73dac9.js"}}(),function(){r.miniCssF=function(t){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="my-app:";r.l=function(o,a,n,s){if(t[o])t[o].push(a);else{var i,u;if(void 0!==n)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==e+n){i=h;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",e+n),i.src=o),t[o]=[a];var d=function(e,r){i.onerror=i.onload=null,clearTimeout(p);var a=t[o];if(delete t[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(t){return t(r)})),e)return e(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={524:0};r.f.j=function(e,o){var a=r.o(t,e)?t[e]:void 0;if(0!==a)if(a)o.push(a[2]);else{var n=new Promise((function(r,o){a=t[e]=[r,o]}));o.push(a[2]=n);var s=r.p+r.u(e),i=new Error,u=function(o){if(r.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var n=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",i.name="ChunkLoadError",i.type=n,i.request=s,a[1](i)}};r.l(s,u,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,n,s=o[0],i=o[1],u=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(u)var l=u(r)}for(e&&e(o);c<s.length;c++)n=s[c],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(l)},o=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(7319)}));o=r.O(o)})();
//# sourceMappingURL=app.e834ea1c.js.map